Поповер — небольшой немодальный диалог без затемнения, который открывается рядом с триггерным элементом. Он может содержать текст, поля ввода, любые другие элементы управления.

<!-- example(popover-common) -->

### Когда использовать

Когда нужно добавить на страницу интерактивный диалог, но без лишней модальности (например, настройку фильтров в таблице).

### Структура компонента

<div style="margin-top: 15px;">
    <img src="./assets/images/popover/popover__structure.jpg" alt="popover structure" style="max-width: 528px"/>
</div>

#### Обязательные элементы

* Указатель
* Тело поповера с основным текстом

#### Необязательные элементы

* Шапка
* Контролы в теле
* Футер
* Кнопки в футере (нежелательны, потому что создают модальность)

<div class="kbq-alert kbq-alert_info" style="margin-top: 15px;">
    <i class="mc kbq-icon kbq-info-o_16 kbq-alert__icon"></i>
    <span>Поповер должен оставаться относительно небольшим. Если вам нужно показать много контента, возьмите&nbsp;<a href="/components/modal" kbq-link pseudo>модальный&nbsp;диалог</a> или <a href="/components/sidepanel" kbq-link pseudo>сайдпанель</a>.</span>
</div>

### Описание работы

#### Как открыть поповер

Поповер появляется после взаимодействия с триггерным элементом. Событие для открытия поповера — клик.

При открытом поповере фоновая страница не блокируется, все интерактивные элементы (например, [ссылки](/components/link) и [кнопки](/components/button)) доступны и при наведении получают ховер.

#### Как закрыть поповер

* Клик мимо поповера
* Клик по кнопкам «Отмена» или «Применить» в футере (если есть)
* Нажатие на Esc
* Проскроллить страницу (опционально, см. поведение при скролле)

##### Сохранение изменений при закрытии

Поповер с кнопкой «Применить» работает как модальный диалог: изменения применяются только нажатием на кнопку. Другие способы закрыть поповер не сохраняют изменения.

Поповер без терминальных кнопок сохраняет изменения в реальном времени. Закрытие кликом мимо поповера или клавишей Esc не сбрасывает изменения.

### Поведение при скролле

Скролл не блокируется. По умолчанию при скролле поповер не закрывается и скроллится вместе со страницей, оставаясь в том месте, откуда был открыт.

<div class="kbq-alert kbq-alert_warning" style="margin-top: 15px;">
    <i class="mc kbq-icon kbq-error_16 kbq-alert__icon"></i>
    Поповер может закрываться при скролле страницы; какое поведение выбрать — решает проектировщик.
</div>

<!-- example(popover-scroll) -->

### Выравнивание

<div class="kbq-alert kbq-alert_info" style="margin-top: 15px;">
    <i class="mc kbq-icon kbq-info-o_16 kbq-alert__icon"></i>
    Учитывайте контекст, в котором появляется поповер. Настройте выравнивание так, чтобы поповер не закрывал важный контент.
</div>

##### По центру элемента

Указатель по центру поповера, целится в центр триггерного элемента.

<!-- example(popover-placement-center) -->

##### По краю элемента

Край поповера выравнивается по краю триггерного элемента, указатель на фиксированном расстоянии от края поповера. Если элемент слишком маленький, указатель выравнивается по центру элемента.

<!-- example(popover-placement-edges) -->

__Динамическое выравнивание__

Если для поповера не хватает места, он попытается перейти в другое положение. Например, из положения «снизу в центре» в положение «сверху в центре».

### Фокус и работа с клавиатурой

Если поповер содержит интерактивные элементы, он управляется по правилам модального окна (см. [Модальный диалог](/components/modal)).

После закрытия поповера фокус переходит на триггерный элемент. Это поведение по умолчанию. Есть несколько случаев, когда полезно переместить фокус на другой элемент.

| Клавиша                                                                           | Поведение |
|-----------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| <span class="hot-key-button">Tab</span>                                           | Перевести фокус на триггерный элемент или с него |
| <span class="hot-key-button">Space</span> \ <span class="hot-key-button">↵</span> | Открыть поповер |
| <span class="hot-key-button">Esc</span>                                           | Свернуть поповер |

### Валидация

Форма внутри поповера подчиняется [общим правилам валидации](/other/validation).

Поповер остается открытым, пока ошибки не будут исправлены.

### Дизайн и анимация

#### Размер

Поповер имеет фиксированную ширину. Чтобы оптимально использовать пространство, полезно заложить несколько вариантов ширины поповера.

| Предустановка | Ширина |
|---------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Small   | 200 |
| Medium  | 400 (по умолчанию) |
| Large   | 640 |

Высота поповера зависит от контента. Рекомендуемая максимальная высота — 480px (может быть увеличена по усмотрению дизайнера).


### Связанные компоненты

[Дропдаун](/components/dropdown) — кнопка-меню, открывающая список доступных действий. Работает как группа контролов: в таб-последовательность попадает только триггерный элемент. Поповер же работает по логике модального диалога: при открытии перехватывает фокус и ведет его по контролам.

[Тултип](/components/tooltip) — маленькое сообщение, которое показывается при наведении указателя на элемент интерфейса. В нем не может быть интерактивных элементов или изображений.
