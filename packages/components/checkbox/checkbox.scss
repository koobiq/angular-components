@use '../core/styles/common/tokens' as *;
@use './checkbox-theme' as *;

@mixin _checkbox-big() {
    .kbq-checkbox_big & {
        @content;
    }
}

@mixin _checkbox-label-before() {
    .kbq-checkbox_label-before & {
        @content;
    }
}

@mixin _checkbox-checked() {
    .kbq-checked & {
        @content;
    }
}

@mixin _checkbox-disabled() {
    .kbq-disabled & {
        @content;
    }
}

@mixin _checkbox-indeterminate() {
    .kbq-indeterminate & {
        @content;
    }
}

.kbq-checkbox-checkmark {
    display: none;

    @include _checkbox-checked {
        display: block;
    }

    @include _checkbox-indeterminate {
        display: none;
    }
}

.kbq-checkbox-mixedmark {
    display: none;

    @include _checkbox-checked {
        display: none;
    }

    @include _checkbox-indeterminate {
        display: block;
    }
}

.kbq-checkbox__frame {
    display: flex;
    align-items: center;
    justify-content: center;

    box-sizing: border-box;
    pointer-events: none;
    background-color: transparent;

    border-radius: var(--kbq-checkbox-size-normal-border-radius);
    border-width: var(--kbq-checkbox-size-normal-border-width);
    border-style: solid;

    @include _checkbox-big {
        border-radius: var(--kbq-checkbox-size-big-border-radius);
        border-width: var(--kbq-checkbox-size-big-border-width);
        border-style: solid;
    }

    height: var(--kbq-checkbox-size-normal-width);
    width: var(--kbq-checkbox-size-normal-width);

    @include _checkbox-disabled {
        box-shadow: none;
    }
}

.kbq-checkbox__layout {
    $padding-left: kbq-sum-series-css-variables(
        [checkbox-size-normal-width,
        checkbox-size-normal-horizontal-content-padding]
    );

    // required for `.cdk-visually-hidden` input to be positioned correctly
    position: relative;

    display: inline-flex;

    max-width: calc(100% - $padding-left);

    // `cursor: inherit` ensures that the wrapper element gets the same cursor as the kbq-checkbox
    // (e.g. pointer by default, regular when disabled), instead of the browser default.
    cursor: inherit;

    padding-top: var(--kbq-checkbox-size-normal-padding-top);
    padding-bottom: var(--kbq-checkbox-size-normal-padding-bottom);
    padding-left: $padding-left;

    @include _checkbox-label-before {
        $padding-right: kbq-sum-series-css-variables(
            [ checkbox-size-normal-width,
            checkbox-size-normal-horizontal-content-padding]
        );

        max-width: calc(100% - $padding-right);

        padding-left: 0;
        padding-right: $padding-right;
    }

    vertical-align: top;
}

.kbq-checkbox__inner-container {
    display: inline-block;

    position: absolute;
    top: var(--kbq-checkbox-size-normal-top);
    left: 0;
}

.kbq-checkbox {
    display: inline-block;

    cursor: pointer;
    -webkit-tap-highlight-color: transparent;

    max-width: 100%;

    &.kbq-disabled {
        cursor: default;
    }
}

.kbq-checkbox__text-container {
    display: flex;
    flex-direction: column;

    max-width: 100%;
}

.kbq-checkbox__inner-container_no-side-margin {
    margin-left: 0;
    margin-right: 0;
}

@include kbq-checkbox-theme();
@include kbq-checkbox-typography();
