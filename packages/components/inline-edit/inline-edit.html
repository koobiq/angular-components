@if (label()) {
    <div class="kbq-inline-edit__label">
        <ng-content select="kbq-label" />
    </div>
}

@if (mode() === 'view') {
    @if (true) {
        <span class="kbq-inline-edit__placeholder">{{ placeholder() }}</span>
    } @else {
        <div class="kbq-inline-edit__view-container">
            <ng-container *ngTemplateOutlet="viewModeTemplateRef().templateRef" />
        </div>
    }
} @else {
    <div class="kbq-inline-edit__overlay-anchor">
        <div #overlayOrigin cdkOverlayOrigin class="kbq-inline-edit__overlay-origin"></div>
    </div>

    <ng-template
        cdkConnectedOverlay
        cdkConnectedOverlayLockPosition
        [cdkConnectedOverlayOpen]="isEditMode()"
        [cdkConnectedOverlayOrigin]="overlayOrigin"
        [cdkConnectedOverlayWidth]="overlayWidth()"
        (attach)="onAttach()"
    >
        <div class="kbq-inline-edit__panel">
            <ng-container *ngTemplateOutlet="editModeTemplateRef().templateRef" />

            @if (true) {
                <div class="kbq-inline-edit__terminal-buttons layout-padding-m">
                    <button kbq-button [color]="'contrast'"><i kbq-icon="kbq-check_16"></i></button>
                    <button kbq-button [color]="'contrast-fade'"><i kbq-icon="kbq-check_16"></i></button>
                </div>
            }
        </div>
    </ng-template>
}
