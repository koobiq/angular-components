Filter Button — элемент управления из панели фильтрации, который показывает выбранное значение фильтра, дает возможность изменить его и сбросить.

Данный элемент управления реализован в виде кнопки, которая состоит из 2-ух частей:

— В левой части написано название фильтра. По нажатию на нее открывается меню с выбором значений. К названию фильтра внутри кнопки добавляется подпись выбранных значений.
— В правой части кнопка сброса очищает фильтр, закрывает выпадающие меню, в зависимости от режима работы может скрыть саму кнопку-фильтр.

<!-- example(filter-bar-overview) -->

### Режимы работы фильтров

— Removable. Фильтр можно очистить, а кнопку можно скрыть.
— Cleanable. Кнопка не исчезает после сброса фильтра.
— Required. Фильтр нельзя очистить, можно только изменить его значение.

<!-- example(filter-bar-overview) -->

#### Removable

В этом режиме работы у пользователя есть возможность скрыть компонент, если в фильтре не выбрано значений. В заполненном состоянии кнопка очистки выбрасывает значения фильтра и также скрывает его.

Такие фильтры обычно скрыты в длинном меню, чтобы не перегружать экран. Когда пользователю понадобится отфильтровать поисковую выдачу, он выберет нужный параметр в меню доступных фильтров, и после этого соответствующий элемент будет добавлен на панель фильтрации.

<!-- example(filter-bar-overview) -->

#### Cleanable

Эти фильтры нельзя скрыть, доступна только очистка. После очистки компонент не пропадает с панели фильтров.

Режим Cleanable подходит для ситуаций, когда фильтров мало и есть возможность сразу показать основные, а не скрывать их в выпадающем меню.

<!-- example(filter-bar-overview) -->

#### Required

Фильтр в режиме Required нельзя очистить и скрыть с панели фильтрации. Такой режим используется, когда фильтр обязательно должен быть заполнен. Значение фильтра можно лишь поменять на другое.

<!-- example(filter-bar-overview) -->

### Состояния

#### Пустой фильтр

Когда значение фильтра не заданы, то компонент имеет сдержанное незаметное оформление. В режиме Removable показывается кнопка сброса.

<!-- example(filter-bar-overview) -->

В режиме Cleanable у пустого фильтра нет кнопки сброса.

<!-- example(filter-bar-overview) -->

А в режиме Required фильтр не может быть пустым.

#### Заполненное состояние

В заполненном состоянии компонент имеет более заметное оформление, чтобы пользователь обращал внимание, какие параметры влияют на поисковую выдачу.

<!-- example(filter-bar-overview) -->

Единственное выбранное значение показывается внутри кнопки после названия фильтра. Если выбрано несколько значений, то после названия располагается счетчик с количеством.

<!-- example(filter-bar-overview) -->

В неактивном состоянии подпись значения отображается бледно.

<!-- example(filter-bar-overview) -->

#### Кнопка сброса

<!-- example(filter-bar-overview) -->

<!-- example(filter-bar-overview) -->

В режиме Cleanable кнопка сброса очищает значение, фокус переходит на кнопку фильтра.

<!-- example(filter-bar-overview) -->

По ховеру и фокусу сброса показывается тултип.

<!-- example(filter-bar-overview) -->

В режиме Removable кнопка сброса удаляет фильтр, фокус переходит на следующий focusable-элемент.

<!-- example(filter-bar-overview) -->

### Длинный текст в кнопке

Кнопка-фильтр растягивается в зависимости от содержимого, но ширина ограничена 320px, а переноса текста на новую строку не бывает.

<!-- example(filter-bar-overview) -->

Ограничение ширины дает возможность списку фильтров аккуратно вмещать множество элементов и располагать их на разных строках с переносом.

<!-- example(filter-bar-overview) -->

По ховеру или фокусу в тултипе будет показано полностью название фильтра и выбранное значение

<!-- example(filter-bar-overview) -->

### Управление с клавиатуры

#### Фильтр

Tab
Переход к кнопке сброса или к следующему focusable-элементу, если сброс недоступен
Enter, Space
Открыть меню выбора значений фильтра. Фокус на первый элемент меню
Arrow Down
Открывает меню, перемещает фокус на его первый элемент
Arrow Up
Открывает меню, перемещает фокус на его последний элемент

#### Кнопка сброса

Enter, Space
Закрыть меню выбора значений фильтра без сохранения,
Очистить фильтр
Cleanable: перевести фокус на основную кнопку
Removable: удалить фильтр, перевести фокус на следующий focusable-элемент
Esc
Скрыть тултип

#### Роли WAI-ARIA, состояния и атрибуты

— Элемент, который открывает меню имеет роль button.
— Элемент с ролью button имеет атрибут aria-haspopup со значением menu или true.
— Когда меню открыто, атрибут aria-expanded элемента с ролью button принимает значение true. Когда меню закрыто, то false.
— Элемент меню, который показывается по кнопке, должен иметь роль menu.
