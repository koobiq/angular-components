<ng-template
    #tooltipContent
    let-ctx
>
    <div>{{ ctx.content }}</div>
</ng-template>

<ng-template
    #tooltipHeader
    let-ctx
>
    <span>{{ ctx.header }}</span>
</ng-template>

<div class="container flex-100 layout-column layout-align-start-start">
    <div
        class="kbq-form-vertical layout-row layou-align-start-start config"
        [style]="getOrder('config')"
    >
        <div class="flex-20 kbq-form__fieldset">
            <div class="kbq-form__row">
                <label
                    for="order"
                    class="kbq-form__label"
                >
                    Inverse layout order
                </label>

                <kbq-checkbox
                    id="order"
                    class="kbq-form__control"
                    [(ngModel)]="selectedOrder"
                >
                    Yes/No
                </kbq-checkbox>
            </div>

            <div class="kbq-form__row">
                <label
                    for="element"
                    class="kbq-form__label"
                >
                    Choose color
                </label>

                <kbq-form-field
                    id="color"
                    class="kbq-form__control"
                >
                    <kbq-select
                        [placeholder]="'Select element'"
                        [(value)]="selectedColor"
                    >
                        <kbq-option [value]="componentColors.Contrast">Contrast</kbq-option>
                        <kbq-option [value]="componentColors.ContrastFade">ContrastFade</kbq-option>
                        <kbq-option [value]="componentColors.Theme">Theme</kbq-option>
                        <kbq-option [value]="componentColors.Warning">Warning</kbq-option>
                        <kbq-option [value]="componentColors.Error">Error</kbq-option>
                    </kbq-select>
                </kbq-form-field>
            </div>

            <div class="kbq-form__row">
                <label
                    for="element"
                    class="kbq-form__label"
                >
                    Choose trigger element
                </label>

                <kbq-form-field
                    id="element"
                    class="kbq-form__control"
                >
                    <kbq-select
                        [placeholder]="'Select element'"
                        [(value)]="selectedElement"
                    >
                        <kbq-option [value]="'button'">Button</kbq-option>
                        <kbq-option [value]="'icon'">Icon</kbq-option>
                        <kbq-option [value]="'input'">Input</kbq-option>
                        <kbq-option [value]="'extended'">extended</kbq-option>
                    </kbq-select>
                </kbq-form-field>
            </div>

            <div class="kbq-form__row">
                <label
                    for="trigger"
                    class="kbq-form__label"
                >
                    Choose popover trigger
                </label>

                <kbq-form-field
                    id="trigger"
                    class="kbq-form__control"
                >
                    <kbq-select
                        [placeholder]="'Select trigger'"
                        [(value)]="selectedTrigger"
                    >
                        <kbq-option [value]="'click'">Click</kbq-option>
                        <kbq-option [value]="'hover'">Hover</kbq-option>
                        <kbq-option [value]="'focus'">Focus</kbq-option>
                    </kbq-select>
                </kbq-form-field>
            </div>

            <div class="kbq-form__row">
                <label
                    for="layout"
                    class="kbq-form__label"
                >
                    Choose layout content placement
                </label>

                <kbq-form-field
                    id="layout"
                    class="kbq-form__control"
                >
                    <kbq-select
                        [placeholder]="'Select layout'"
                        [(value)]="layoutClass"
                    >
                        <kbq-option [value]="'layout-row layout-align-start-start'">Start start</kbq-option>
                        <kbq-option [value]="'layout-row layout-align-start-center'">Start center</kbq-option>
                        <kbq-option [value]="'layout-row layout-align-start-end'">Start end</kbq-option>
                        <kbq-option [value]="'layout-row layout-align-center-start'">Center start</kbq-option>
                        <kbq-option [value]="'layout-row layout-align-center-center'">Center center</kbq-option>
                        <kbq-option [value]="'layout-row layout-align-center-end'">Center end</kbq-option>
                        <kbq-option [value]="'layout-row layout-align-end-start'">End start</kbq-option>
                        <kbq-option [value]="'layout-row layout-align-end-center'">End center</kbq-option>
                        <kbq-option [value]="'layout-row layout-align-end-end'">End end</kbq-option>
                    </kbq-select>
                </kbq-form-field>
            </div>

            <div class="kbq-form__row">
                <label
                    for="layout"
                    class="kbq-form__label"
                >
                    Choose tooltip text
                </label>
                <kbq-form-field>
                    <input
                        kbqInput
                        [(ngModel)]="inputText"
                    />
                </kbq-form-field>
            </div>
        </div>
        <div class="flex left-padding layout-align-center-center">
            <label
                for="trigger"
                class="flex kbq-form__label"
            >
                Choose kbqPlacement
            </label>
            <div class="visual-box">
                <div
                    class="visual-box_clickable visual-box_placement-top-left"
                    [ngClass]="{
                        active: activated('topLeft'),
                        actual: isActual('topLeft')
                    }"
                    (click)="setPlacement(popUpPlacements.TopLeft)"
                ></div>
                <div
                    class="visual-box_clickable visual-box_placement-top"
                    [ngClass]="{
                        active: activated('top'),
                        actual: isActual('top')
                    }"
                    (click)="setPlacement(popUpPlacements.Top)"
                ></div>
                <div
                    class="visual-box_clickable visual-box_placement-top-right"
                    [ngClass]="{
                        active: activated('topRight'),
                        actual: isActual('topRight')
                    }"
                    (click)="setPlacement(popUpPlacements.TopRight)"
                ></div>
                <div
                    class="visual-box_clickable visual-box_placement-right-top"
                    [ngClass]="{
                        active: activated('rightTop'),
                        actual: isActual('rightTop')
                    }"
                    (click)="setPlacement(popUpPlacements.RightTop)"
                ></div>
                <div
                    class="visual-box_clickable visual-box_placement-right"
                    [ngClass]="{
                        active: activated('right'),
                        actual: isActual('right')
                    }"
                    (click)="setPlacement(popUpPlacements.Right)"
                ></div>
                <div
                    class="visual-box_clickable visual-box_placement-right-bottom"
                    [ngClass]="{
                        active: activated('rightBottom'),
                        actual: isActual('rightBottom')
                    }"
                    (click)="setPlacement(popUpPlacements.RightBottom)"
                ></div>
                <div
                    class="visual-box_clickable visual-box_placement-bottom-right"
                    [ngClass]="{
                        active: activated('bottomRight'),
                        actual: isActual('bottomRight')
                    }"
                    (click)="setPlacement(popUpPlacements.BottomRight)"
                ></div>
                <div
                    class="visual-box_clickable visual-box_placement-bottom"
                    [ngClass]="{
                        active: activated('bottom'),
                        actual: isActual('bottom')
                    }"
                    (click)="setPlacement(popUpPlacements.Bottom)"
                ></div>
                <div
                    class="visual-box_clickable visual-box_placement-bottom-left"
                    [ngClass]="{
                        active: activated('bottomLeft'),
                        actual: isActual('bottomLeft')
                    }"
                    (click)="setPlacement(popUpPlacements.BottomLeft)"
                ></div>
                <div
                    class="visual-box_clickable visual-box_placement-left-bottom"
                    [ngClass]="{
                        active: activated('leftBottom'),
                        actual: isActual('leftBottom')
                    }"
                    (click)="setPlacement(popUpPlacements.LeftBottom)"
                ></div>
                <div
                    class="visual-box_clickable visual-box_placement-left"
                    [ngClass]="{
                        active: activated('left'),
                        actual: isActual('left')
                    }"
                    (click)="setPlacement(popUpPlacements.Left)"
                ></div>
                <div
                    class="visual-box_clickable visual-box_placement-left-top"
                    [ngClass]="{
                        active: activated('leftTop'),
                        actual: isActual('leftTop')
                    }"
                    (click)="setPlacement(popUpPlacements.LeftTop)"
                ></div>
            </div>

            <div class="kbq-form__row flex-50">
                <label class="kbq-form__label">Choose kbqPlacementPriority</label>

                <kbq-form-field class="kbq-form__control">
                    <kbq-select
                        [multiple]="true"
                        [(value)]="multipleSelected"
                    >
                        <kbq-option
                            disabled
                            [value]="popUpPlacements.Top"
                        >
                            Top
                        </kbq-option>
                        <kbq-option [value]="popUpPlacements.TopLeft">TopLeft</kbq-option>
                        <kbq-option [value]="popUpPlacements.TopRight">TopRight</kbq-option>
                        <kbq-option [value]="popUpPlacements.Bottom">Bottom</kbq-option>
                        <kbq-option [value]="popUpPlacements.BottomLeft">BottomLeft</kbq-option>
                        <kbq-option [value]="popUpPlacements.BottomRight">BottomRight</kbq-option>
                        <kbq-option [value]="popUpPlacements.Right">Right</kbq-option>
                        <kbq-option [value]="popUpPlacements.RightTop">RightTop</kbq-option>
                        <kbq-option [value]="popUpPlacements.RightBottom">RightBottom</kbq-option>
                        <kbq-option [value]="popUpPlacements.Left">Left</kbq-option>
                        <kbq-option [value]="popUpPlacements.LeftTop">LeftTop</kbq-option>
                        <kbq-option [value]="popUpPlacements.LeftBottom">LeftBottom</kbq-option>
                    </kbq-select>
                </kbq-form-field>
            </div>
        </div>
        <div class="flex left-padding">
            <h3>Configuration:</h3>
            <ul>
                <li>Tooltip trigger: {{ selectedTrigger }}</li>
                <li>Tooltip anchor placement: {{ selectedPlacement }}</li>
                <li>Tooltip anchored element: {{ selectedElement }}</li>
                @if (this.isFallbackActivated) {
                    <li class="actual red">Tooltip activated fallback position: {{ activatedPosition }}</li>
                }
                <li>Layout positioning: {{ layoutClass }}</li>
                @if (multipleSelected) {
                    <li>Placement priority order: {{ multipleSelected }}</li>
                }
            </ul>
        </div>
    </div>

    <div
        class="{{ layoutClass }} result"
        [style]="getOrder('result')"
    >
        <div>
            @switch (showElement()) {
                @case (ELEMENTS.BUTTON) {
                    <button
                        kbq-button
                        [kbqPlacement]="selectedPlacement"
                        [kbqPlacementPriority]="multipleSelected"
                        [kbqTooltip]="inputText"
                        [kbqTooltipArrow]="false"
                        [kbqTooltipColor]="selectedColor"
                        [kbqTrigger]="selectedTrigger"
                        (kbqPlacementChange)="onPlacementChange($event)"
                        (kbqVisibleChange)="onTooltipVisibleChange($event)"
                    >
                        Button
                    </button>
                }
                @case (ELEMENTS.EXTENDED) {
                    <button
                        kbq-button
                        [kbqExtendedTooltip]="tooltipContent"
                        [kbqPlacement]="selectedPlacement"
                        [kbqPlacementPriority]="multipleSelected"
                        [kbqTooltipArrow]="false"
                        [kbqTooltipClass]="'tooltip-485'"
                        [kbqTooltipColor]="selectedColor"
                        [kbqTooltipContext]="toolTipContext"
                        [kbqTooltipHeader]="tooltipHeader"
                        [kbqTooltipOffset]="123"
                        [kbqTrigger]="selectedTrigger"
                        (kbqPlacementChange)="onPlacementChange($event)"
                        (kbqVisibleChange)="onTooltipVisibleChange($event)"
                    >
                        Button
                    </button>
                }
                @case (ELEMENTS.INPUT) {
                    <kbq-form-field>
                        <input
                            kbqInput
                            placeholder="Button content"
                            [kbqPlacement]="selectedPlacement"
                            [kbqPlacementPriority]="multipleSelected"
                            [kbqTooltip]="inputText"
                            [kbqTooltipColor]="selectedColor"
                            [kbqTrigger]="selectedTrigger"
                            [(ngModel)]="content"
                            (kbqPlacementChange)="onPlacementChange($event)"
                            (kbqVisibleChange)="onTooltipVisibleChange($event)"
                        />
                    </kbq-form-field>
                }
                @case (ELEMENTS.ICON) {
                    <div>
                        <i
                            kbq-icon="mc-calendar_16"
                            [kbqPlacement]="selectedPlacement"
                            [kbqPlacementPriority]="multipleSelected"
                            [kbqTooltip]="inputText"
                            [kbqTooltipColor]="selectedColor"
                            [kbqTrigger]="selectedTrigger"
                            (kbqPlacementChange)="onPlacementChange($event)"
                            (kbqVisibleChange)="onTooltipVisibleChange($event)"
                        ></i>
                    </div>
                }
            }
        </div>
    </div>
</div>
