<dev-theme-toggle />

<ng-template #customContent>
    @switch (popoverActiveStage) {
        @case (1) {
            В западной традиции рыбой выступает фрагмент латинского текста из философского трактата Цицерона «О пределах
            добра и зла», написанного в 45 году до нашей эры. Впервые этот текст был применен для набора шрифтовых
            образцов неизвестным печатником еще в XVI веке. В западной традиции рыбой выступает фрагмент латинского
            текста из философского трактата Цицерона «О пределах добра и зла», написанного в 45 году до нашей эры.
            Впервые этот текст был применен для набора шрифтовых образцов неизвестным печатником еще в XVI веке. В
            западной традиции рыбой выступает фрагмент латинского текста из философского трактата Цицерона «О пределах
            добра и зла», написанного в 45 году до нашей эры. Впервые этот текст был применен для набора шрифтовых
            образцов неизвестным печатником еще в XVI веке. В западной традиции рыбой выступает фрагмент латинского
            текста из философского трактата Цицерона «О пределах добра и зла», написанного в 45 году до нашей эры.
            Впервые этот текст был применен для набора шрифтовых образцов неизвестным печатником еще в XVI веке.
        }
        @case (2) {
            Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet
            dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper
            suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in
            vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et
            accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait
            nulla facilisi.
        }
        @case (3) {
            Сегодня этот текст используют практически все дизайнеры, набирающие рыбу латиницей. Абзац считается
            каноническим во всех справочниках по типографике и предлагается к использованию в статьях, посвященных
            изготовлению макета верстки при отсутствии финальных текстов. В руководствах по работе с фирменным стилем
            крупных международных компаний именно с этих слов начинаются образцы верстки. Существуют даже издания с
            названием Lorem ipsum.
        }
    }
</ng-template>

<ng-template #customFooter>
    <div class="flex-100 layout-row layout-align-space-between-center">
        <button kbq-button class="step" [color]="'contrast'" (click)="changeStep(-1)">&larr; Назад</button>

        <button kbq-button class="step" [color]="'contrast'" (click)="changeStep(1)">Дальше &rarr;</button>
    </div>
</ng-template>

<dev-examples />

<div class="dev-container flex-100 layout-column layout-align-start-start">
    <div class="kbq-form-vertical layout-row layou-align-start-start dev-config" [style.order]="getOrder('config')">
        <div class="flex-20 kbq-form__fieldset">
            <div class="kbq-form__row">
                <label for="order" class="kbq-form__label">Inverse layout order</label>

                <kbq-checkbox id="order" class="kbq-form__control" [(ngModel)]="selectedOrder">Yes/No</kbq-checkbox>
            </div>

            <div class="kbq-form__row">
                <label for="isClosable" class="kbq-form__label">Is closable</label>

                <kbq-checkbox id="isClosable" class="kbq-form__control" [(ngModel)]="isClosable">Yes/No</kbq-checkbox>
            </div>

            <div class="kbq-form__row">
                <label for="element" class="kbq-form__label">Choose trigger element</label>

                <kbq-form-field id="element" class="kbq-form__control">
                    <kbq-select [placeholder]="'Select element'" [(value)]="selectedElement">
                        <kbq-option [value]="ELEMENTS.BUTTON">Button</kbq-option>
                        <kbq-option [value]="ELEMENTS.CONFIRM_BUTTON">Confirm Button</kbq-option>
                        <kbq-option [value]="ELEMENTS.ICON">Icon</kbq-option>
                        <kbq-option [value]="ELEMENTS.INPUT">Input</kbq-option>
                        <kbq-option [value]="ELEMENTS.RADIO_GROUP">Radio group</kbq-option>
                        <kbq-option [value]="ELEMENTS.LINK">Link</kbq-option>
                    </kbq-select>
                </kbq-form-field>
            </div>

            <div
                class="kbq-form__row"
                [style.display]="selectedElement === ELEMENTS.CONFIRM_BUTTON ? 'none' : 'initial'"
            >
                <label for="trigger" class="kbq-form__label">Choose popover trigger</label>

                <div class="kbq-form__control">
                    <kbq-form-field id="trigger">
                        <kbq-select [placeholder]="'Select trigger'" [(value)]="selectedTrigger">
                            <kbq-option [value]="TRIGGERS.CLICK">Click</kbq-option>
                            <kbq-option [value]="TRIGGERS.HOVER">Hover</kbq-option>
                            <kbq-option [value]="TRIGGERS.FOCUS">Focus</kbq-option>
                            <kbq-option [value]="TRIGGERS.PROGRAM">Program</kbq-option>
                        </kbq-select>
                    </kbq-form-field>
                </div>

                @if (selectedTrigger === TRIGGERS.PROGRAM) {
                    <div class="kbq-form__control layout-padding-top-s">
                        <button kbq-button class="layout-margin-right-s" (click)="openPopover()">Open</button>
                        <button kbq-button (click)="closePopover()">Close</button>
                    </div>
                }
            </div>

            <div
                class="kbq-form__row"
                [style.display]="selectedElement === ELEMENTS.CONFIRM_BUTTON ? 'none' : 'initial'"
            >
                <label for="size" class="kbq-form__label">Choose popover size</label>

                <kbq-form-field id="size" class="kbq-form__control">
                    <kbq-select [placeholder]="'Select size'" [(value)]="selectedSize">
                        <kbq-option [value]="SIZE.SMALL">Small</kbq-option>
                        <kbq-option [value]="SIZE.MEDIUM">Medium</kbq-option>
                        <kbq-option [value]="SIZE.LARGE">Large</kbq-option>
                    </kbq-select>
                </kbq-form-field>
            </div>

            <div class="kbq-form__row">
                <label for="layout" class="kbq-form__label">Choose layout content placement</label>

                <kbq-form-field id="layout" class="kbq-form__control">
                    <kbq-select [placeholder]="'Select layout'" [(value)]="layoutClass">
                        <kbq-option [value]="'layout-row layout-align-start-start'">Start start</kbq-option>
                        <kbq-option [value]="'layout-row layout-align-start-center'">Start center</kbq-option>
                        <kbq-option [value]="'layout-row layout-align-start-end'">Start end</kbq-option>
                        <kbq-option [value]="'layout-row layout-align-center-start'">Center start</kbq-option>
                        <kbq-option [value]="'layout-row layout-align-center-center'">Center center</kbq-option>
                        <kbq-option [value]="'layout-row layout-align-center-end'">Center end</kbq-option>
                        <kbq-option [value]="'layout-row layout-align-end-start'">End start</kbq-option>
                        <kbq-option [value]="'layout-row layout-align-end-center'">End center</kbq-option>
                        <kbq-option [value]="'layout-row layout-align-end-end'">End end</kbq-option>
                    </kbq-select>
                </kbq-form-field>
            </div>

            <div
                class="kbq-form__row"
                [style.display]="selectedElement === ELEMENTS.CONFIRM_BUTTON ? 'initial' : 'none'"
            >
                <label for="layout" class="kbq-form__label">Set confirm text</label>

                <kbq-form-field id="layout" class="kbq-form__control">
                    <input kbqInput [(ngModel)]="confirmText" />
                </kbq-form-field>
            </div>

            <div class="kbq-form__row">
                <label for="layout" class="kbq-form__label">Stick to window</label>

                <kbq-form-field id="layout" class="kbq-form__control">
                    <kbq-select [placeholder]="'Select layout'" [(value)]="stickToWindow">
                        <kbq-option [value]="popUpPlacements.Top">{{ popUpPlacements.Top }}</kbq-option>
                        <kbq-option [value]="popUpPlacements.Right">{{ popUpPlacements.Right }}</kbq-option>
                        <kbq-option [value]="popUpPlacements.Bottom">{{ popUpPlacements.Bottom }}</kbq-option>
                        <kbq-option [value]="popUpPlacements.Left">{{ popUpPlacements.Left }}</kbq-option>
                    </kbq-select>
                </kbq-form-field>
            </div>
            <br />
        </div>
        <div class="flex dev-left-padding layout-align-center-center">
            <label for="trigger" class="flex kbq-form__label">Choose kbqPlacement</label>
            <div class="dev-visual-box">
                <div
                    class="dev-visual-box_clickable dev-visual-box_placement-top-left"
                    [ngClass]="{
                        'dev-active': activated('topLeft'),
                        actual: isActual('topLeft')
                    }"
                    (click)="setPlacement(popUpPlacements.TopLeft)"
                ></div>
                <div
                    class="dev-visual-box_clickable dev-visual-box_placement-top"
                    [ngClass]="{
                        'dev-active': activated('top'),
                        actual: isActual('top')
                    }"
                    (click)="setPlacement(popUpPlacements.Top)"
                ></div>
                <div
                    class="dev-visual-box_clickable dev-visual-box_placement-top-right"
                    [ngClass]="{
                        'dev-active': activated('topRight'),
                        actual: isActual('topRight')
                    }"
                    (click)="setPlacement(popUpPlacements.TopRight)"
                ></div>
                <div
                    class="dev-visual-box_clickable dev-visual-box_placement-right-top"
                    [ngClass]="{
                        'dev-active': activated('rightTop'),
                        actual: isActual('rightTop')
                    }"
                    (click)="setPlacement(popUpPlacements.RightTop)"
                ></div>
                <div
                    class="dev-visual-box_clickable dev-visual-box_placement-right"
                    [ngClass]="{
                        'dev-active': activated('right'),
                        actual: isActual('right')
                    }"
                    (click)="setPlacement(popUpPlacements.Right)"
                ></div>
                <div
                    class="dev-visual-box_clickable dev-visual-box_placement-right-bottom"
                    [ngClass]="{
                        'dev-active': activated('rightBottom'),
                        actual: isActual('rightBottom')
                    }"
                    (click)="setPlacement(popUpPlacements.RightBottom)"
                ></div>
                <div
                    class="dev-visual-box_clickable dev-visual-box_placement-bottom-right"
                    [ngClass]="{
                        'dev-active': activated('bottomRight'),
                        actual: isActual('bottomRight')
                    }"
                    (click)="setPlacement(popUpPlacements.BottomRight)"
                ></div>
                <div
                    class="dev-visual-box_clickable dev-visual-box_placement-bottom"
                    [ngClass]="{
                        'dev-active': activated('bottom'),
                        actual: isActual('bottom')
                    }"
                    (click)="setPlacement(popUpPlacements.Bottom)"
                ></div>
                <div
                    class="dev-visual-box_clickable dev-visual-box_placement-bottom-left"
                    [ngClass]="{
                        'dev-active': activated('bottomLeft'),
                        actual: isActual('bottomLeft')
                    }"
                    (click)="setPlacement(popUpPlacements.BottomLeft)"
                ></div>
                <div
                    class="dev-visual-box_clickable dev-visual-box_placement-left-bottom"
                    [ngClass]="{
                        'dev-active': activated('leftBottom'),
                        actual: isActual('leftBottom')
                    }"
                    (click)="setPlacement(popUpPlacements.LeftBottom)"
                ></div>
                <div
                    class="dev-visual-box_clickable dev-visual-box_placement-left"
                    [ngClass]="{
                        'dev-active': activated('left'),
                        actual: isActual('left')
                    }"
                    (click)="setPlacement(popUpPlacements.Left)"
                ></div>
                <div
                    class="dev-visual-box_clickable dev-visual-box_placement-left-top"
                    [ngClass]="{
                        'dev-active': activated('leftTop'),
                        actual: isActual('leftTop')
                    }"
                    (click)="setPlacement(popUpPlacements.LeftTop)"
                ></div>
            </div>

            <div class="kbq-form__row flex-50">
                <label for="size" class="kbq-form__label">Choose kbqPlacementPriority</label>

                <kbq-form-field class="kbq-form__control">
                    <kbq-select [multiple]="true" [(value)]="multipleSelected">
                        <kbq-option disabled [value]="popUpPlacements.Top">Top</kbq-option>
                        <kbq-option [value]="popUpPlacements.TopLeft">TopLeft</kbq-option>
                        <kbq-option [value]="popUpPlacements.TopRight">TopRight</kbq-option>
                        <kbq-option [value]="popUpPlacements.Bottom">Bottom</kbq-option>
                        <kbq-option [value]="popUpPlacements.BottomLeft">BottomLeft</kbq-option>
                        <kbq-option [value]="popUpPlacements.BottomRight">BottomRight</kbq-option>
                        <kbq-option [value]="popUpPlacements.Right">Right</kbq-option>
                        <kbq-option [value]="popUpPlacements.RightTop">RightTop</kbq-option>
                        <kbq-option [value]="popUpPlacements.RightBottom">RightBottom</kbq-option>
                        <kbq-option [value]="popUpPlacements.Left">Left</kbq-option>
                        <kbq-option [value]="popUpPlacements.LeftTop">LeftTop</kbq-option>
                        <kbq-option [value]="popUpPlacements.LeftBottom">LeftBottom</kbq-option>
                    </kbq-select>
                </kbq-form-field>
            </div>
        </div>
        <div class="flex dev-left-padding">
            <h3>Configuration:</h3>
            <ul>
                <li>Popover size: {{ selectedSize }}</li>
                <li>Popover closable: {{ isClosable }}</li>
                <li>Popover trigger: {{ selectedTrigger }}</li>
                <li>Popover anchor placement: {{ selectedPlacement }}</li>
                <li>Popover anchored element: {{ selectedElement }}</li>
                @if (this.isFallbackActivated) {
                    <li class="dev-li-actual dev-red">Popover activated fallback position: {{ activatedPosition }}</li>
                }
                <li>Layout positioning: {{ layoutClass }}</li>
                @if (multipleSelected) {
                    <li>Placement priority order: {{ multipleSelected }}</li>
                }
            </ul>
        </div>
    </div>

    <div class="{{ layoutClass }} dev-result" cdkScrollable style="overflow: scroll" [style.order]="getOrder('result')">
        <div style="min-width: 1500px; display: flex; justify-content: center">
            @switch (showElement()) {
                @case (ELEMENTS.BUTTON) {
                    <button
                        kbq-button
                        kbqPopover
                        [hasCloseButton]="isClosable"
                        [kbqPopoverClass]="'dev-popover-485'"
                        [kbqPopoverContent]="customContent"
                        [kbqPopoverFooter]="customFooter"
                        [kbqPopoverHeader]="
                            'Сегодня этот текст используют практически все дизайнеры, набирающие рыбу латиницей. Абзац считается каноническим во всех справочниках по типографике и предлагается к использованию в статьях, посвященных изготовлению макета верстки при отсутствии финальных текстов. В руководствах по работе с фирменным стилем крупных международных компаний именно с этих слов начинаются образцы верстки. Существуют даже издания с названием Lorem ipsum'
                        "
                        [kbqPopoverPlacement]="selectedPlacement"
                        [kbqPopoverPlacementPriority]="multipleSelected"
                        [kbqPopoverSize]="selectedSize"
                        [kbqTrigger]="selectedTrigger"
                        [kbqPopoverStickToWindow]="stickToWindow"
                        (kbqPopoverPlacementChange)="onStrategyPlacementChange($event)"
                        (kbqPopoverVisibleChange)="onPopoverVisibleChange($event)"
                    >
                        Button
                    </button>
                }
                @case (ELEMENTS.CONFIRM_BUTTON) {
                    <button
                        kbq-button
                        kbqPopoverConfirm
                        [kbqPopoverClass]="'dev-popover-485'"
                        [kbqPopoverConfirmButtonText]="confirmButtonText"
                        [kbqPopoverConfirmText]="confirmText"
                        [kbqPopoverPlacement]="selectedPlacement"
                        [kbqPopoverPlacementPriority]="multipleSelected"
                        (confirm)="onConfirm()"
                        (kbqPopoverPlacementChange)="onStrategyPlacementChange($event)"
                        (kbqPopoverVisibleChange)="onPopoverVisibleChange($event)"
                    >
                        Confirm Button
                    </button>
                }
                @case (ELEMENTS.INPUT) {
                    <kbq-form-field>
                        <input
                            kbqInput
                            kbqPopover
                            placeholder="Button content"
                            [kbqPopoverClass]="'dev-popover-485'"
                            [kbqPopoverContent]="customContent"
                            [kbqPopoverFooter]="customFooter"
                            [kbqPopoverHeader]="'Lorem ipsum'"
                            [kbqPopoverPlacement]="selectedPlacement"
                            [kbqPopoverPlacementPriority]="multipleSelected"
                            [kbqPopoverSize]="selectedSize"
                            [kbqTrigger]="selectedTrigger"
                            [(ngModel)]="content"
                            (kbqPopoverPlacementChange)="onStrategyPlacementChange($event)"
                            (kbqPopoverVisibleChange)="onPopoverVisibleChange($event)"
                        />
                    </kbq-form-field>
                }
                @case (ELEMENTS.ICON) {
                    <div>
                        <i
                            kbq-icon="kbq-calendar_16"
                            kbqPopover
                            [kbqPopoverClass]="'dev-popover-485'"
                            [kbqPopoverContent]="customContent"
                            [kbqPopoverFooter]="customFooter"
                            [kbqPopoverHeader]="'Header text'"
                            [kbqPopoverPlacement]="selectedPlacement"
                            [kbqPopoverPlacementPriority]="multipleSelected"
                            [kbqPopoverSize]="selectedSize"
                            [kbqTrigger]="selectedTrigger"
                            (kbqPopoverPlacementChange)="onStrategyPlacementChange($event)"
                            (kbqPopoverVisibleChange)="onPopoverVisibleChange($event)"
                        ></i>
                    </div>
                }
                @case (ELEMENTS.LINK) {
                    <div>
                        <span
                            kbq-link
                            kbqPopover
                            pseudo
                            [kbqPopoverClass]="'dev-popover-485'"
                            [kbqPopoverContent]="customContent"
                            [kbqPopoverFooter]="customFooter"
                            [kbqPopoverHeader]="'Header text'"
                            [kbqPopoverPlacement]="selectedPlacement"
                            [kbqPopoverPlacementPriority]="multipleSelected"
                            [kbqPopoverSize]="selectedSize"
                            [kbqTrigger]="selectedTrigger"
                            (kbqPopoverPlacementChange)="onStrategyPlacementChange($event)"
                            (kbqPopoverVisibleChange)="onPopoverVisibleChange($event)"
                        >
                            Link
                        </span>
                    </div>
                }
                @case (ELEMENTS.RADIO_GROUP) {
                    <form>
                        <kbq-radio-group>
                            <kbq-radio-button class="dev-radio-button">
                                <span
                                    kbq-link
                                    kbqPopover
                                    [kbqPopoverClass]="'dev-popover-485'"
                                    [kbqPopoverContent]="customContent"
                                    [kbqPopoverFooter]="customFooter"
                                    [kbqPopoverHeader]="
                                        'Сегодня этот текст используют практически все дизайнеры, набирающие рыбу латиницей. Абзац считается каноническим во всех справочниках по типографике и предлагается к использованию в статьях, посвященных изготовлению макета верстки при отсутствии финальных текстов. В руководствах по работе с фирменным стилем крупных международных компаний именно с этих слов начинаются образцы верстки. Существуют даже издания с названием Lorem ipsum'
                                    "
                                    [kbqPopoverPlacement]="selectedPlacement"
                                    [kbqPopoverPlacementPriority]="multipleSelected"
                                    [kbqPopoverSize]="selectedSize"
                                    [kbqTrigger]="selectedTrigger"
                                    (kbqPopoverPlacementChange)="onStrategyPlacementChange($event)"
                                    (kbqPopoverVisibleChange)="onPopoverVisibleChange($event)"
                                >
                                    span.kbq-link
                                </span>
                            </kbq-radio-button>
                            <br />
                            <br />
                            <kbq-radio-button class="dev-radio-button">
                                <button
                                    kbq-button
                                    kbqPopover
                                    [hasCloseButton]="true"
                                    [kbqPopoverClass]="'dev-popover-485'"
                                    [kbqPopoverContent]="customContent"
                                    [kbqPopoverFooter]="customFooter"
                                    [kbqPopoverPlacement]="selectedPlacement"
                                    [kbqPopoverPlacementPriority]="multipleSelected"
                                    [kbqPopoverSize]="selectedSize"
                                    [kbqTrigger]="selectedTrigger"
                                    (kbqPopoverPlacementChange)="onStrategyPlacementChange($event)"
                                    (kbqPopoverVisibleChange)="onPopoverVisibleChange($event)"
                                >
                                    Button
                                </button>
                            </kbq-radio-button>
                        </kbq-radio-group>
                    </form>
                }
            }
        </div>
    </div>
</div>
