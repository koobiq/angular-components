<br />
<br />
<br />
<br />
<br />
<br />
<br />
<div style="height: 20px">{{ control.value | json }}</div>

<button
    kbq-button
    (click)="disabledState = !disabledState"
>
    disable
</button>
&nbsp;
<!--<button kbq-button (click)="modelValue = 'Application'">setValue: incorrect array</button>&nbsp;-->
<!--<button kbq-button (click)="modelValue = 'Applications'">setValue: correct array</button>&nbsp;-->
<button
    kbq-button
    (click)="modelValue = null"
>
    modelValue = null
</button>

<button
    kbq-button
    (click)="multiSelectSelectFormControl.setValue(null)"
>
    setValue(null)
</button>
<button
    kbq-button
    (click)="multiSelectSelectFormControl.reset()"
>
    reset
</button>
<button
    kbq-button
    (click)="multiSelectSelectFormControl.setValue(['Pictures'])"
>
    setValue
</button>

<br />
<br />
<br />

<div class="dev-container">
    <h2 class="kbq-subheading">Custom footer</h2>
    <kbq-form-field>
        <kbq-tree-select
            placeholder="this is placeholder"
            [disabled]="disabledState"
            [formControl]="control"
            [hiddenItemsTextFormatter]="hiddenItemsTextFormatter"
            [multiple]="true"
            (closed)="closed($event)"
            (opened)="opened($event)"
            (openedChange)="openedChange($event)"
            (selectionChange)="onSelectionChange($event)"
        >
            <kbq-form-field
                kbqFormFieldWithoutBorders
                kbqSelectSearch
            >
                <i
                    kbq-icon="mc-search_16"
                    kbqPrefix
                ></i>
                <input
                    kbqInput
                    type="text"
                    [formControl]="searchControl"
                />
                <kbq-cleaner></kbq-cleaner>
            </kbq-form-field>

            <div kbq-select-search-empty-result>Ничего не найдено</div>

            <kbq-cleaner></kbq-cleaner>

            <kbq-tree-selection
                [dataSource]="dataSource"
                [treeControl]="treeControl"
            >
                <kbq-tree-option
                    *kbqTreeNodeDef="let node"
                    kbqTreeNodePadding
                    [checkboxThirdState]="true"
                >
                    <span
                        [innerHTML]="treeControl.getViewValue(node) | mcHighlight: treeControl.filterValue.value"
                    ></span>
                </kbq-tree-option>

                <kbq-tree-option
                    *kbqTreeNodeDef="let node; when: hasChild"
                    kbqTreeNodePadding
                    [checkboxThirdState]="true"
                >
                    <kbq-tree-node-toggle [node]="node"></kbq-tree-node-toggle>
                    <span
                        [innerHTML]="treeControl.getViewValue(node) | mcHighlight: treeControl.filterValue.value"
                    ></span>
                </kbq-tree-option>
            </kbq-tree-selection>

            <div
                kbq-select-footer
                class="custom-footer"
            >
                <div>Custom footer</div>
            </div>
        </kbq-tree-select>
    </kbq-form-field>
</div>

<div class="dev-container">
    <h2 class="kbq-subheading">Default footer</h2>
    <kbq-form-field>
        <kbq-tree-select
            placeholder="this is placeholder"
            [disabled]="disabledState"
            [formControl]="control"
            [hiddenItemsTextFormatter]="hiddenItemsTextFormatter"
            [multiple]="true"
            (closed)="closed($event)"
            (opened)="opened($event)"
            (openedChange)="openedChange($event)"
            (selectionChange)="onSelectionChange($event)"
        >
            <kbq-form-field
                kbqFormFieldWithoutBorders
                kbqSelectSearch
            >
                <i
                    kbq-icon="mc-search_16"
                    kbqPrefix
                ></i>
                <input
                    kbqInput
                    type="text"
                    [formControl]="searchControl"
                />
                <kbq-cleaner></kbq-cleaner>
            </kbq-form-field>

            <div kbq-select-search-empty-result>Ничего не найдено</div>

            <kbq-cleaner></kbq-cleaner>

            <kbq-tree-selection
                [dataSource]="dataSource"
                [treeControl]="treeControl"
            >
                <kbq-tree-option
                    *kbqTreeNodeDef="let node"
                    kbqTreeNodePadding
                    [checkboxThirdState]="true"
                >
                    <span
                        [innerHTML]="treeControl.getViewValue(node) | mcHighlight: treeControl.filterValue.value"
                    ></span>
                </kbq-tree-option>

                <kbq-tree-option
                    *kbqTreeNodeDef="let node; when: hasChild"
                    kbqTreeNodePadding
                    [checkboxThirdState]="true"
                >
                    <i
                        kbq-icon="mc-angle-down-S_16"
                        kbqTreeNodeToggle
                        [style.transform]="treeControl.isExpanded(node) ? '' : 'rotate(-90deg)'"
                    ></i>
                    <span
                        [innerHTML]="treeControl.getViewValue(node) | mcHighlight: treeControl.filterValue.value"
                    ></span>
                </kbq-tree-option>
            </kbq-tree-selection>

            <kbq-select-footer>Default footer</kbq-select-footer>
        </kbq-tree-select>
    </kbq-form-field>

    <br />
    <br />

    <kbq-form-field>
        <kbq-tree-select
            placeholder="placeholder for single tree-select"
            [disabled]="disabledState"
            [hiddenItemsTextFormatter]="hiddenItemsTextFormatter"
            [multiple]="true"
            (closed)="closed($event)"
            (opened)="opened($event)"
            (openedChange)="openedChange($event)"
            (selectionChange)="onSelectionChange($event)"
        >
            <kbq-form-field
                kbqFormFieldWithoutBorders
                kbqSelectSearch
            >
                <i
                    kbq-icon="mc-search_16"
                    kbqPrefix
                ></i>
                <input
                    kbqInput
                    type="text"
                    [formControl]="searchControl"
                />
                <kbq-cleaner></kbq-cleaner>
            </kbq-form-field>

            <div kbq-select-search-empty-result>Ничего не найдено</div>

            <kbq-cleaner></kbq-cleaner>

            <kbq-tree-selection
                [dataSource]="dataSource"
                [treeControl]="treeControl"
            >
                <kbq-tree-option
                    *kbqTreeNodeDef="let node"
                    kbqTreeNodePadding
                    [checkboxThirdState]="true"
                >
                    <span
                        [innerHTML]="treeControl.getViewValue(node) | mcHighlight: treeControl.filterValue.value"
                    ></span>
                </kbq-tree-option>

                <kbq-tree-option
                    *kbqTreeNodeDef="let node; when: hasChild"
                    kbqTreeNodePadding
                    [checkboxThirdState]="true"
                >
                    <i
                        kbq-icon="mc-angle-down-S_16"
                        kbqTreeNodeToggle
                        [style.transform]="treeControl.isExpanded(node) ? '' : 'rotate(-90deg)'"
                    ></i>
                    <span
                        [innerHTML]="treeControl.getViewValue(node) | mcHighlight: treeControl.filterValue.value"
                    ></span>
                </kbq-tree-option>
            </kbq-tree-selection>

            <kbq-select-footer>Default footer</kbq-select-footer>
        </kbq-tree-select>
    </kbq-form-field>

    <br />
    <br />

    <kbq-form-field>
        <kbq-tree-select
            placeholder="placeholder for multiple tree-select"
            [disabled]="disabledState"
            [hiddenItemsTextFormatter]="hiddenItemsTextFormatter"
            [multiple]="true"
            (closed)="closed($event)"
            (opened)="opened($event)"
            (openedChange)="openedChange($event)"
            (selectionChange)="onSelectionChange($event)"
        >
            <kbq-form-field
                kbqFormFieldWithoutBorders
                kbqSelectSearch
            >
                <i
                    kbq-icon="mc-search_16"
                    kbqPrefix
                ></i>
                <input
                    kbqInput
                    type="text"
                    [formControl]="searchControl"
                />
                <kbq-cleaner></kbq-cleaner>
            </kbq-form-field>

            <div kbq-select-search-empty-result>Ничего не найдено</div>

            <kbq-cleaner></kbq-cleaner>

            <kbq-tree-selection
                [dataSource]="dataSource"
                [treeControl]="treeControl"
            >
                <kbq-tree-option
                    *kbqTreeNodeDef="let node"
                    kbqTreeNodePadding
                    [checkboxThirdState]="true"
                >
                    <span
                        [innerHTML]="treeControl.getViewValue(node) | mcHighlight: treeControl.filterValue.value"
                    ></span>
                </kbq-tree-option>

                <kbq-tree-option
                    *kbqTreeNodeDef="let node; when: hasChild"
                    kbqTreeNodePadding
                    [checkboxThirdState]="true"
                >
                    <i
                        kbq-icon="mc-angle-down-S_16"
                        kbqTreeNodeToggle
                        [style.transform]="treeControl.isExpanded(node) ? '' : 'rotate(-90deg)'"
                    ></i>
                    <span
                        [innerHTML]="treeControl.getViewValue(node) | mcHighlight: treeControl.filterValue.value"
                    ></span>
                </kbq-tree-option>
            </kbq-tree-selection>

            <kbq-select-footer>Default footer</kbq-select-footer>
        </kbq-tree-select>
    </kbq-form-field>
</div>

<div class="dev-container">
    <h2 class="kbq-subheading">Default footer with icon button</h2>
    <kbq-form-field>
        <kbq-tree-select
            placeholder="this is placeholder"
            [disabled]="disabledState"
            [formControl]="control"
            [hiddenItemsTextFormatter]="hiddenItemsTextFormatter"
            [multiple]="true"
            (closed)="closed($event)"
            (opened)="opened($event)"
            (openedChange)="openedChange($event)"
            (selectionChange)="onSelectionChange($event)"
        >
            <kbq-form-field
                kbqFormFieldWithoutBorders
                kbqSelectSearch
            >
                <i
                    kbq-icon="mc-search_16"
                    kbqPrefix
                ></i>
                <input
                    kbqInput
                    type="text"
                    [formControl]="searchControl"
                />
                <kbq-cleaner></kbq-cleaner>
            </kbq-form-field>

            <div kbq-select-search-empty-result>Ничего не найдено</div>

            <kbq-cleaner></kbq-cleaner>

            <kbq-tree-selection
                [dataSource]="dataSource"
                [treeControl]="treeControl"
            >
                <kbq-tree-option
                    *kbqTreeNodeDef="let node"
                    kbqTreeNodePadding
                    [checkboxThirdState]="true"
                >
                    <span
                        [innerHTML]="treeControl.getViewValue(node) | mcHighlight: treeControl.filterValue.value"
                    ></span>
                </kbq-tree-option>

                <kbq-tree-option
                    *kbqTreeNodeDef="let node; when: hasChild"
                    kbqTreeNodePadding
                    [checkboxThirdState]="true"
                >
                    <i
                        kbq-icon="mc-angle-down-S_16"
                        kbqTreeNodeToggle
                        [style.transform]="treeControl.isExpanded(node) ? '' : 'rotate(-90deg)'"
                    ></i>
                    <span
                        [innerHTML]="treeControl.getViewValue(node) | mcHighlight: treeControl.filterValue.value"
                    ></span>
                </kbq-tree-option>
            </kbq-tree-selection>

            <kbq-select-footer class="kbq-select__footer_icon">
                <button
                    kbq-button
                    class="kbq-button_transparent"
                >
                    <i kbq-icon="mc-upload-to-cloud_16"></i>
                    Добавить
                </button>
            </kbq-select-footer>
        </kbq-tree-select>
    </kbq-form-field>
</div>

<div class="dev-container">
    <form
        novalidate
        class="kbq-form-horizontal"
    >
        <div class="kbq-form__row">
            <label
                for="select-test"
                class="kbq-form__label"
            >
                Подпись поля
            </label>
            <kbq-form-field class="kbq-form__control flex-80">
                <kbq-tree-select
                    placeholder="this is placeholder"
                    [disabled]="disabledState"
                    [formControl]="control"
                    [hiddenItemsTextFormatter]="hiddenItemsTextFormatter"
                    [id]="'select-test'"
                    [multiple]="true"
                    (closed)="closed($event)"
                    (opened)="opened($event)"
                    (openedChange)="openedChange($event)"
                    (selectionChange)="onSelectionChange($event)"
                >
                    <kbq-form-field
                        kbqFormFieldWithoutBorders
                        kbqSelectSearch
                    >
                        <i
                            kbq-icon="mc-search_16"
                            kbqPrefix
                        ></i>
                        <input
                            kbqInput
                            type="text"
                            [formControl]="searchControl"
                        />
                        <kbq-cleaner></kbq-cleaner>
                    </kbq-form-field>

                    <div kbq-select-search-empty-result>Ничего не найдено</div>

                    <kbq-cleaner></kbq-cleaner>

                    <kbq-tree-selection
                        [dataSource]="dataSource"
                        [treeControl]="treeControl"
                    >
                        <kbq-tree-option
                            *kbqTreeNodeDef="let node"
                            kbqTreeNodePadding
                            [checkboxThirdState]="true"
                        >
                            <span
                                [innerHTML]="
                                    treeControl.getViewValue(node) | mcHighlight: treeControl.filterValue.value
                                "
                            ></span>
                        </kbq-tree-option>

                        <kbq-tree-option
                            *kbqTreeNodeDef="let node; when: hasChild"
                            kbqTreeNodePadding
                            [checkboxThirdState]="true"
                        >
                            <i
                                kbq-icon="mc-angle-down-S_16"
                                kbqTreeNodeToggle
                                [style.transform]="treeControl.isExpanded(node) ? '' : 'rotate(-90deg)'"
                            ></i>
                            <span
                                [innerHTML]="
                                    treeControl.getViewValue(node) | mcHighlight: treeControl.filterValue.value
                                "
                            ></span>
                        </kbq-tree-option>
                    </kbq-tree-selection>

                    <div
                        kbq-select-footer
                        class="custom-footer"
                    >
                        <div>Custom footer</div>
                    </div>
                </kbq-tree-select>
            </kbq-form-field>
        </div>
    </form>
</div>
