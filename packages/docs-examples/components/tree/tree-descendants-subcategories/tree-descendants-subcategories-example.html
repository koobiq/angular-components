<kbq-tree-selection
    multiple="checkbox"
    [autoSelect]="false"
    [dataSource]="dataSource"
    [treeControl]="treeControl"
    [(ngModel)]="modelValue"
    (selectionChange)="onSelectionChange($event)"
>
    <kbq-tree-option
        *kbqTreeNodeDef="let node"
        kbqTreeNodePadding
        [checkboxThirdState]="true"
    >
        <span [innerHTML]="treeControl.getViewValue(node) | mcHighlight: treeControl.filterValue.value"></span>
    </kbq-tree-option>

    <kbq-tree-option
        *kbqTreeNodeDef="let node; when: hasChild"
        kbqTreeNodePadding
        [checkboxThirdState]="true"
    >
        <kbq-tree-node-toggle [node]="node" />

        <span [innerHTML]="treeControl.getViewValue(node) | mcHighlight: treeControl.filterValue.value"></span>
    </kbq-tree-option>
</kbq-tree-selection>
