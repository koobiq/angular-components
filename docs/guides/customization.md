В этом руководстве вы познакомитесь с процессом создания пользовательских дизайн-токенов и управления ими с помощью [Style-Dictionary](https://amzn.github.io/style-dictionary/#/architecture). Пользовательские дизайн-токены позволяют вам переопределять свойства, используемые в дизайн-системе, делая их масштабируемым и персонализированными. Создание пользовательских дизайн-токенов аналогично созданию пользовательских тем.

#### Подготовка

Для создания кастомизированных токенов, необходимо добавить style-dictionary в зависимости:

npm:

```shell
npm install --save-dev style-dictionary
```

yarn:

```shell
yarn add --dev style-dictionary
```

#### Описание процесса

Процесс создания пользовательских тем состоит из 2 этапов:

-   1 **Создание кастомных токенов**
    -   1.1 **Создание директории и добавление необходимых файлов.** Если для пользовательской темы необходимо переопределить некоторые значения стандартных тем, то наименования этих файлов должны совпадать с названиями из пакета `@koobiq/design-tokens`.
    -   1.2 **Создание скрипта генерации токенов.** Данный скрипт расширяет и меняет значение базовых токенов. Реализация в [примере.](#пример-на-stackblitz)
-   2 **Применение кастомных токенов** - данный этап аналогичен [подключению стандартных тем](#подключение-стандартных-тем), только токены здесь берутся по локальным путям и меняется имя темы.

#### Создание кастомных токенов

Чтобы создать пользовательские токены, вам необходимо подготовить директорию для новой темы. Вот как вы можете его настроить:

1 Создайте каталог темы: перейдите в каталог src/styles вашего проекта и создайте новый каталог с именем customized-theme. Структура должна выглядеть следующим образом:

```
└─ styles
    └─ koobiq ·························· Директория с темами
        ├─ customized-theme ············ Директория для кастомных токенов
        ├   └─ properties ·············· Директория для файлов с переопределяемыми свойствами
        ├─ _index.scss
        └─ _theme.kbq.scss
```

2 Добавьте файлы переопределяемых свойств: В properties добавьте файлы с расширением .json5, чтобы задать значения, которые вы хотите настроить.
Вот несколько примеров того, что могут содержать эти файлы:

| файл свойств        | описание                                                  |
| ------------------- | --------------------------------------------------------- |
| colors.json5        | Именованные цвета для основных состояний и главных цветов |
| globals.json5       | Размеры, общие цвета                                      |
| md-typography.json5 | Типографика для маркдауна                                 |
| typography.json5    | Общая типографика                                         |
| palette.json5       | Палитра цветов со значениями                              |

Также, помимо основных свойств можно переопределить отдельные свойства стандартных компонентов Koobiq.

#### Создание скрипта генерации токенов

Чтобы автоматизировать процесс генерации токенов, добавьте скрипт в своем проекте. Этот скрипт будет отвечать за расширение и модификацию базовых токенов.

1. В вашем проекте создайте новый файл с именем build-tokens.js.

#### Применение кастомных токенов

Чтобы применить новую тему, вы можете подключить ее [таким же образом](#подключение-стандартных-тем), как и стандартные светлую/темную темы.

**Структура каталогов для нескольких тем**
Для управления несколькими наборами дизайн-токенов, организуйте свой каталог стилей следующим образом:

```
└─ styles
    └─ koobiq ························ Директория с наборами
        ├─ customized-theme ·········· Сгенерированный набор кастомных токенов с импортированными токенами
        ├─ out-of-the-box-theme ······ Набор с токенами по умолчанию из пакета Koobiq
        ├─ _index.scss ··············· Файл, содержащий ссылки на sass-файлы из стандартной темы, нужен для удобного экспорта
        └─ _theme.kbq.scss ··········· Файл стилей Koobiq
```

Если для светлой/темной темы необходимо применение стандартного и пользовательского отображения, то можно настроить это путём уточнения CSS-класса.

#### Пример на Stackblitz

Пример применения пользовательских тем можно найти [тут](https://stackblitz.com/edit/vaffk1-exk57x?file=src%2Fapp%2Fapp.component.html)
